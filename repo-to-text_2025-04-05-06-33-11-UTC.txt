Directory: digitalmine

Directory Structure:
```
.
‚îú‚îÄ‚îÄ .gitignore
‚îú‚îÄ‚îÄ README.md
‚îú‚îÄ‚îÄ build.gradle
‚îú‚îÄ‚îÄ compose.yaml
‚îÇ¬†¬† ‚îî‚îÄ‚îÄ gradle/wrapper
‚îÇ¬†¬†     ‚îú‚îÄ‚îÄ gradle/wrapper/gradle-wrapper.jar
‚îÇ¬†¬†     ‚îî‚îÄ‚îÄ gradle/wrapper/gradle-wrapper.properties
‚îú‚îÄ‚îÄ gradlew
‚îú‚îÄ‚îÄ gradlew.bat
‚îú‚îÄ‚îÄ settings.gradle
    ‚îÇ¬†¬† ‚îÇ¬†¬†         ‚îî‚îÄ‚îÄ src/main/java/ru/gigastack/digitalmine
    ‚îÇ¬†¬† ‚îÇ¬†¬†             ‚îú‚îÄ‚îÄ src/main/java/ru/gigastack/digitalmine/DigitalmineApplication.java
    ‚îÇ¬†¬† ‚îÇ¬†¬†             ‚îú‚îÄ‚îÄ src/main/java/ru/gigastack/digitalmine/config
    ‚îÇ¬†¬† ‚îÇ¬†¬†             ‚îÇ¬†¬† ‚îú‚îÄ‚îÄ src/main/java/ru/gigastack/digitalmine/config/OpenApiConfig.java
    ‚îÇ¬†¬† ‚îÇ¬†¬†             ‚îÇ¬†¬† ‚îú‚îÄ‚îÄ src/main/java/ru/gigastack/digitalmine/config/SecurityConfig.java
    ‚îÇ¬†¬† ‚îÇ¬†¬†             ‚îÇ¬†¬† ‚îú‚îÄ‚îÄ src/main/java/ru/gigastack/digitalmine/config/WebConfig.java
    ‚îÇ¬†¬† ‚îÇ¬†¬†             ‚îÇ¬†¬† ‚îî‚îÄ‚îÄ src/main/java/ru/gigastack/digitalmine/config/WebSocketConfig.java
    ‚îÇ¬†¬† ‚îÇ¬†¬†             ‚îú‚îÄ‚îÄ src/main/java/ru/gigastack/digitalmine/controller
    ‚îÇ¬†¬† ‚îÇ¬†¬†             ‚îÇ¬†¬† ‚îú‚îÄ‚îÄ src/main/java/ru/gigastack/digitalmine/controller/AuthController.java
    ‚îÇ¬†¬† ‚îÇ¬†¬†             ‚îÇ¬†¬† ‚îú‚îÄ‚îÄ src/main/java/ru/gigastack/digitalmine/controller/CameraController.java
    ‚îÇ¬†¬† ‚îÇ¬†¬†             ‚îÇ¬†¬† ‚îú‚îÄ‚îÄ src/main/java/ru/gigastack/digitalmine/controller/ClimateController.java
    ‚îÇ¬†¬† ‚îÇ¬†¬†             ‚îÇ¬†¬† ‚îú‚îÄ‚îÄ src/main/java/ru/gigastack/digitalmine/controller/LightingController.java
    ‚îÇ¬†¬† ‚îÇ¬†¬†             ‚îÇ¬†¬† ‚îú‚îÄ‚îÄ src/main/java/ru/gigastack/digitalmine/controller/RFIDController.java
    ‚îÇ¬†¬† ‚îÇ¬†¬†             ‚îÇ¬†¬† ‚îú‚îÄ‚îÄ src/main/java/ru/gigastack/digitalmine/controller/SensorDataController.java
    ‚îÇ¬†¬† ‚îÇ¬†¬†             ‚îÇ¬†¬† ‚îî‚îÄ‚îÄ src/main/java/ru/gigastack/digitalmine/controller/VehicleController.java
    ‚îÇ¬†¬† ‚îÇ¬†¬†             ‚îú‚îÄ‚îÄ src/main/java/ru/gigastack/digitalmine/dto
    ‚îÇ¬†¬† ‚îÇ¬†¬†             ‚îÇ¬†¬† ‚îú‚îÄ‚îÄ src/main/java/ru/gigastack/digitalmine/dto/CameraControlDto.java
    ‚îÇ¬†¬† ‚îÇ¬†¬†             ‚îÇ¬†¬† ‚îú‚îÄ‚îÄ src/main/java/ru/gigastack/digitalmine/dto/LightingControlDto.java
    ‚îÇ¬†¬† ‚îÇ¬†¬†             ‚îÇ¬†¬† ‚îú‚îÄ‚îÄ src/main/java/ru/gigastack/digitalmine/dto/RFIDDto.java
    ‚îÇ¬†¬† ‚îÇ¬†¬†             ‚îÇ¬†¬† ‚îî‚îÄ‚îÄ src/main/java/ru/gigastack/digitalmine/dto/SensorDataDto.java
    ‚îÇ¬†¬† ‚îÇ¬†¬†             ‚îú‚îÄ‚îÄ src/main/java/ru/gigastack/digitalmine/model
    ‚îÇ¬†¬† ‚îÇ¬†¬†             ‚îÇ¬†¬† ‚îú‚îÄ‚îÄ src/main/java/ru/gigastack/digitalmine/model/RfidLog.java
    ‚îÇ¬†¬† ‚îÇ¬†¬†             ‚îÇ¬†¬† ‚îú‚îÄ‚îÄ src/main/java/ru/gigastack/digitalmine/model/SensorData.java
    ‚îÇ¬†¬† ‚îÇ¬†¬†             ‚îÇ¬†¬† ‚îî‚îÄ‚îÄ src/main/java/ru/gigastack/digitalmine/model/User.java
    ‚îÇ¬†¬† ‚îÇ¬†¬†             ‚îú‚îÄ‚îÄ src/main/java/ru/gigastack/digitalmine/repository
    ‚îÇ¬†¬† ‚îÇ¬†¬†             ‚îÇ¬†¬† ‚îú‚îÄ‚îÄ src/main/java/ru/gigastack/digitalmine/repository/RfidLogRepository.java
    ‚îÇ¬†¬† ‚îÇ¬†¬†             ‚îÇ¬†¬† ‚îú‚îÄ‚îÄ src/main/java/ru/gigastack/digitalmine/repository/SensorDataRepository.java
    ‚îÇ¬†¬† ‚îÇ¬†¬†             ‚îÇ¬†¬† ‚îî‚îÄ‚îÄ src/main/java/ru/gigastack/digitalmine/repository/UserRepository.java
    ‚îÇ¬†¬† ‚îÇ¬†¬†             ‚îú‚îÄ‚îÄ src/main/java/ru/gigastack/digitalmine/security
    ‚îÇ¬†¬† ‚îÇ¬†¬†             ‚îÇ¬†¬† ‚îú‚îÄ‚îÄ src/main/java/ru/gigastack/digitalmine/security/CustomUserDetailsService.java
    ‚îÇ¬†¬† ‚îÇ¬†¬†             ‚îÇ¬†¬† ‚îú‚îÄ‚îÄ src/main/java/ru/gigastack/digitalmine/security/JwtAuthenticationFilter.java
    ‚îÇ¬†¬† ‚îÇ¬†¬†             ‚îÇ¬†¬† ‚îî‚îÄ‚îÄ src/main/java/ru/gigastack/digitalmine/security/JwtTokenProvider.java
    ‚îÇ¬†¬† ‚îÇ¬†¬†             ‚îî‚îÄ‚îÄ src/main/java/ru/gigastack/digitalmine/service
    ‚îÇ¬†¬† ‚îÇ¬†¬†                 ‚îú‚îÄ‚îÄ src/main/java/ru/gigastack/digitalmine/service/LightingService.java
    ‚îÇ¬†¬† ‚îÇ¬†¬†                 ‚îú‚îÄ‚îÄ src/main/java/ru/gigastack/digitalmine/service/MqttClientService.java
    ‚îÇ¬†¬† ‚îÇ¬†¬†                 ‚îú‚îÄ‚îÄ src/main/java/ru/gigastack/digitalmine/service/UserService.java
    ‚îÇ¬†¬† ‚îÇ¬†¬†                 ‚îî‚îÄ‚îÄ src/main/java/ru/gigastack/digitalmine/service/VehicleService.java
    ‚îÇ¬†¬† ‚îî‚îÄ‚îÄ src/main/resources
    ‚îÇ¬†¬†     ‚îú‚îÄ‚îÄ src/main/resources/application.properties
    ‚îÇ¬†¬†     ‚îú‚îÄ‚îÄ src/main/resources/logback-spring.xml
                    ‚îî‚îÄ‚îÄ src/test/java/ru/gigastack/digitalmine
                        ‚îî‚îÄ‚îÄ src/test/java/ru/gigastack/digitalmine/DigitalmineApplicationTests.java
```

Contents of README.md:
```
# DigITalMine

Spring Boot –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–ª—è —Ü–∏—Ñ—Ä–æ–≤–æ–≥–æ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø—Ä–æ—Ü–µ—Å—Å–∞–º–∏ (Digital Mine Platform).

## ‚öôÔ∏è –£—Å—Ç–∞–Ω–æ–≤–∫–∞

```bash
git clone https://github.com/gigastack-official/hackathon-spring-2025-backend
cd digitalmine
```

## üöÄ –ó–∞–ø—É—Å–∫

1. –£–±–µ–¥–∏—Å—å, —á—Ç–æ Docker –∑–∞–ø—É—â–µ–Ω:

```bash
docker ps
```

2. –ó–∞–ø—É—Å—Ç–∏ –ø—Ä–æ–µ–∫—Ç:

```bash
./gradlew bootRun
```

> Spring Boot –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–ø—É—Å—Ç–∏—Ç –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã –∏–∑ `compose.yaml`.


## üí° –ü–æ–ª–µ–∑–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã

| –ö–æ–º–∞–Ω–¥–∞                   | –û–ø–∏—Å–∞–Ω–∏–µ                          |
|--------------------------|-----------------------------------|
| `./gradlew bootRun`      | –ó–∞–ø—É—Å–∫ Spring Boot –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è     |
| `./gradlew clean build`  | –ü–æ–ª–Ω–∞—è —Å–±–æ—Ä–∫–∞                     |
| `./gradlew test`         | –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤                     |
| `docker compose up`      | –í—Ä—É—á–Ω—É—é –∑–∞–ø—É—Å—Ç–∏—Ç—å Docker-—Å–µ—Ä–≤–∏—Å—ã  |


http://127.0.0.1:8080/swagger-ui/index.html
```

Contents of gradlew:
```
#!/bin/sh

#
# Copyright ¬© 2015-2021 the original authors.
#
# Licensed under the Apache License, Version 2.0 (the "License");
# you may not use this file except in compliance with the License.
# You may obtain a copy of the License at
#
#      https://www.apache.org/licenses/LICENSE-2.0
#
# Unless required by applicable law or agreed to in writing, software
# distributed under the License is distributed on an "AS IS" BASIS,
# WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
# See the License for the specific language governing permissions and
# limitations under the License.
#
# SPDX-License-Identifier: Apache-2.0
#

##############################################################################
#
#   Gradle start up script for POSIX generated by Gradle.
#
#   Important for running:
#
#   (1) You need a POSIX-compliant shell to run this script. If your /bin/sh is
#       noncompliant, but you have some other compliant shell such as ksh or
#       bash, then to run this script, type that shell name before the whole
#       command line, like:
#
#           ksh Gradle
#
#       Busybox and similar reduced shells will NOT work, because this script
#       requires all of these POSIX shell features:
#         * functions;
#         * expansions ¬´$var¬ª, ¬´${var}¬ª, ¬´${var:-default}¬ª, ¬´${var+SET}¬ª,
#           ¬´${var#prefix}¬ª, ¬´${var%suffix}¬ª, and ¬´$( cmd )¬ª;
#         * compound commands having a testable exit status, especially ¬´case¬ª;
#         * various built-in commands including ¬´command¬ª, ¬´set¬ª, and ¬´ulimit¬ª.
#
#   Important for patching:
#
#   (2) This script targets any POSIX shell, so it avoids extensions provided
#       by Bash, Ksh, etc; in particular arrays are avoided.
#
#       The "traditional" practice of packing multiple parameters into a
#       space-separated string is a well documented source of bugs and security
#       problems, so this is (mostly) avoided, by progressively accumulating
#       options in "$@", and eventually passing that to Java.
#
#       Where the inherited environment variables (DEFAULT_JVM_OPTS, JAVA_OPTS,
#       and GRADLE_OPTS) rely on word-splitting, this is performed explicitly;
#       see the in-line comments for details.
#
#       There are tweaks for specific operating systems such as AIX, CygWin,
#       Darwin, MinGW, and NonStop.
#
#   (3) This script is generated from the Groovy template
#       https://github.com/gradle/gradle/blob/HEAD/platforms/jvm/plugins-application/src/main/resources/org/gradle/api/internal/plugins/unixStartScript.txt
#       within the Gradle project.
#
#       You can find Gradle at https://github.com/gradle/gradle/.
#
##############################################################################

# Attempt to set APP_HOME

# Resolve links: $0 may be a link
app_path=$0

# Need this for daisy-chained symlinks.
while
    APP_HOME=${app_path%"${app_path##*/}"}  # leaves a trailing /; empty if no leading path
    [ -h "$app_path" ]
do
    ls=$( ls -ld "$app_path" )
    link=${ls#*' -> '}
    case $link in             #(
      /*)   app_path=$link ;; #(
      *)    app_path=$APP_HOME$link ;;
    esac
done

# This is normally unused
# shellcheck disable=SC2034
APP_BASE_NAME=${0##*/}
# Discard cd standard output in case $CDPATH is set (https://github.com/gradle/gradle/issues/25036)
APP_HOME=$( cd -P "${APP_HOME:-./}" > /dev/null && printf '%s\n' "$PWD" ) || exit

# Use the maximum available, or set MAX_FD != -1 to use that value.
MAX_FD=maximum

warn () {
    echo "$*"
} >&2

die () {
    echo
    echo "$*"
    echo
    exit 1
} >&2

# OS specific support (must be 'true' or 'false').
cygwin=false
msys=false
darwin=false
nonstop=false
case "$( uname )" in                #(
  CYGWIN* )         cygwin=true  ;; #(
  Darwin* )         darwin=true  ;; #(
  MSYS* | MINGW* )  msys=true    ;; #(
  NONSTOP* )        nonstop=true ;;
esac

CLASSPATH=$APP_HOME/gradle/wrapper/gradle-wrapper.jar


# Determine the Java command to use to start the JVM.
if [ -n "$JAVA_HOME" ] ; then
    if [ -x "$JAVA_HOME/jre/sh/java" ] ; then
        # IBM's JDK on AIX uses strange locations for the executables
        JAVACMD=$JAVA_HOME/jre/sh/java
    else
        JAVACMD=$JAVA_HOME/bin/java
    fi
    if [ ! -x "$JAVACMD" ] ; then
        die "ERROR: JAVA_HOME is set to an invalid directory: $JAVA_HOME

Please set the JAVA_HOME variable in your environment to match the
location of your Java installation."
    fi
else
    JAVACMD=java
    if ! command -v java >/dev/null 2>&1
    then
        die "ERROR: JAVA_HOME is not set and no 'java' command could be found in your PATH.

Please set the JAVA_HOME variable in your environment to match the
location of your Java installation."
    fi
fi

# Increase the maximum file descriptors if we can.
if ! "$cygwin" && ! "$darwin" && ! "$nonstop" ; then
    case $MAX_FD in #(
      max*)
        # In POSIX sh, ulimit -H is undefined. That's why the result is checked to see if it worked.
        # shellcheck disable=SC2039,SC3045
        MAX_FD=$( ulimit -H -n ) ||
            warn "Could not query maximum file descriptor limit"
    esac
    case $MAX_FD in  #(
      '' | soft) :;; #(
      *)
        # In POSIX sh, ulimit -n is undefined. That's why the result is checked to see if it worked.
        # shellcheck disable=SC2039,SC3045
        ulimit -n "$MAX_FD" ||
            warn "Could not set maximum file descriptor limit to $MAX_FD"
    esac
fi

# Collect all arguments for the java command, stacking in reverse order:
#   * args from the command line
#   * the main class name
#   * -classpath
#   * -D...appname settings
#   * --module-path (only if needed)
#   * DEFAULT_JVM_OPTS, JAVA_OPTS, and GRADLE_OPTS environment variables.

# For Cygwin or MSYS, switch paths to Windows format before running java
if "$cygwin" || "$msys" ; then
    APP_HOME=$( cygpath --path --mixed "$APP_HOME" )
    CLASSPATH=$( cygpath --path --mixed "$CLASSPATH" )

    JAVACMD=$( cygpath --unix "$JAVACMD" )

    # Now convert the arguments - kludge to limit ourselves to /bin/sh
    for arg do
        if
            case $arg in                                #(
              -*)   false ;;                            # don't mess with options #(
              /?*)  t=${arg#/} t=/${t%%/*}              # looks like a POSIX filepath
                    [ -e "$t" ] ;;                      #(
              *)    false ;;
            esac
        then
            arg=$( cygpath --path --ignore --mixed "$arg" )
        fi
        # Roll the args list around exactly as many times as the number of
        # args, so each arg winds up back in the position where it started, but
        # possibly modified.
        #
        # NB: a `for` loop captures its iteration list before it begins, so
        # changing the positional parameters here affects neither the number of
        # iterations, nor the values presented in `arg`.
        shift                   # remove old arg
        set -- "$@" "$arg"      # push replacement arg
    done
fi


# Add default JVM options here. You can also use JAVA_OPTS and GRADLE_OPTS to pass JVM options to this script.
DEFAULT_JVM_OPTS='"-Xmx64m" "-Xms64m"'

# Collect all arguments for the java command:
#   * DEFAULT_JVM_OPTS, JAVA_OPTS, and optsEnvironmentVar are not allowed to contain shell fragments,
#     and any embedded shellness will be escaped.
#   * For example: A user cannot expect ${Hostname} to be expanded, as it is an environment variable and will be
#     treated as '${Hostname}' itself on the command line.

set -- \
        "-Dorg.gradle.appname=$APP_BASE_NAME" \
        -classpath "$CLASSPATH" \
        org.gradle.wrapper.GradleWrapperMain \
        "$@"

# Stop when "xargs" is not available.
if ! command -v xargs >/dev/null 2>&1
then
    die "xargs is not available"
fi

# Use "xargs" to parse quoted args.
#
# With -n1 it outputs one arg per line, with the quotes and backslashes removed.
#
# In Bash we could simply go:
#
#   readarray ARGS < <( xargs -n1 <<<"$var" ) &&
#   set -- "${ARGS[@]}" "$@"
#
# but POSIX shell has neither arrays nor command substitution, so instead we
# post-process each arg (as a line of input to sed) to backslash-escape any
# character that might be a shell metacharacter, then use eval to reverse
# that process (while maintaining the separation between arguments), and wrap
# the whole thing up as a single "set" statement.
#
# This will of course break if any of these variables contains a newline or
# an unmatched quote.
#

eval "set -- $(
        printf '%s\n' "$DEFAULT_JVM_OPTS $JAVA_OPTS $GRADLE_OPTS" |
        xargs -n1 |
        sed ' s~[^-[:alnum:]+,./:=@_]~\\&~g; ' |
        tr '\n' ' '
    )" '"$@"'

exec "$JAVACMD" "$@"

```

Contents of build.gradle:
```
plugins {
	id 'java'
	id 'org.springframework.boot' version '3.4.4'
	id 'io.spring.dependency-management' version '1.1.7'
	id 'org.asciidoctor.jvm.convert' version '3.3.2'
}

group = 'ru.gigastack'
version = '0.0.1-SNAPSHOT'

java {
	toolchain {
		languageVersion = JavaLanguageVersion.of(21)
	}
}

configurations {
	compileOnly {
		extendsFrom annotationProcessor
	}
}

repositories {
	mavenCentral()
}

ext {
	set('snippetsDir', file("build/generated-snippets"))
}

dependencies {
	implementation 'org.springframework.boot:spring-boot-starter-data-jpa'
	implementation 'org.springframework.boot:spring-boot-starter-security'
	implementation 'org.springframework.boot:spring-boot-starter-validation'
	implementation 'org.springframework.boot:spring-boot-starter-web'
	implementation 'org.springframework.boot:spring-boot-starter-websocket'
	compileOnly 'org.projectlombok:lombok'
	developmentOnly 'org.springframework.boot:spring-boot-docker-compose'
	runtimeOnly 'org.postgresql:postgresql'
	annotationProcessor 'org.projectlombok:lombok'
	testImplementation 'org.springframework.boot:spring-boot-starter-test'
	testImplementation 'org.springframework.restdocs:spring-restdocs-mockmvc'
	testImplementation 'org.springframework.security:spring-security-test'
	testRuntimeOnly 'org.junit.platform:junit-platform-launcher'
	implementation 'org.springdoc:springdoc-openapi-starter-webmvc-ui:2.1.0'
	implementation("org.eclipse.paho:org.eclipse.paho.client.mqttv3:1.2.5")
	implementation 'io.jsonwebtoken:jjwt-api:0.11.5'
	runtimeOnly 'io.jsonwebtoken:jjwt-impl:0.11.5'
	runtimeOnly 'io.jsonwebtoken:jjwt-jackson:0.11.5'
}

tasks.named('test') {
	outputs.dir snippetsDir
	useJUnitPlatform()
}

tasks.named('asciidoctor') {
	inputs.dir snippetsDir
	dependsOn test
}

```

Contents of compose.yaml:
```
services:
  postgres:
    image: 'postgres:latest'
    environment:
      - 'POSTGRES_DB=mydatabase'
      - 'POSTGRES_PASSWORD=secret'
      - 'POSTGRES_USER=myuser'
    ports:
      - '5432'

```

Contents of gradlew.bat:
```
@rem
@rem Copyright 2015 the original author or authors.
@rem
@rem Licensed under the Apache License, Version 2.0 (the "License");
@rem you may not use this file except in compliance with the License.
@rem You may obtain a copy of the License at
@rem
@rem      https://www.apache.org/licenses/LICENSE-2.0
@rem
@rem Unless required by applicable law or agreed to in writing, software
@rem distributed under the License is distributed on an "AS IS" BASIS,
@rem WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
@rem See the License for the specific language governing permissions and
@rem limitations under the License.
@rem
@rem SPDX-License-Identifier: Apache-2.0
@rem

@if "%DEBUG%"=="" @echo off
@rem ##########################################################################
@rem
@rem  Gradle startup script for Windows
@rem
@rem ##########################################################################

@rem Set local scope for the variables with windows NT shell
if "%OS%"=="Windows_NT" setlocal

set DIRNAME=%~dp0
if "%DIRNAME%"=="" set DIRNAME=.
@rem This is normally unused
set APP_BASE_NAME=%~n0
set APP_HOME=%DIRNAME%

@rem Resolve any "." and ".." in APP_HOME to make it shorter.
for %%i in ("%APP_HOME%") do set APP_HOME=%%~fi

@rem Add default JVM options here. You can also use JAVA_OPTS and GRADLE_OPTS to pass JVM options to this script.
set DEFAULT_JVM_OPTS="-Xmx64m" "-Xms64m"

@rem Find java.exe
if defined JAVA_HOME goto findJavaFromJavaHome

set JAVA_EXE=java.exe
%JAVA_EXE% -version >NUL 2>&1
if %ERRORLEVEL% equ 0 goto execute

echo. 1>&2
echo ERROR: JAVA_HOME is not set and no 'java' command could be found in your PATH. 1>&2
echo. 1>&2
echo Please set the JAVA_HOME variable in your environment to match the 1>&2
echo location of your Java installation. 1>&2

goto fail

:findJavaFromJavaHome
set JAVA_HOME=%JAVA_HOME:"=%
set JAVA_EXE=%JAVA_HOME%/bin/java.exe

if exist "%JAVA_EXE%" goto execute

echo. 1>&2
echo ERROR: JAVA_HOME is set to an invalid directory: %JAVA_HOME% 1>&2
echo. 1>&2
echo Please set the JAVA_HOME variable in your environment to match the 1>&2
echo location of your Java installation. 1>&2

goto fail

:execute
@rem Setup the command line

set CLASSPATH=%APP_HOME%\gradle\wrapper\gradle-wrapper.jar


@rem Execute Gradle
"%JAVA_EXE%" %DEFAULT_JVM_OPTS% %JAVA_OPTS% %GRADLE_OPTS% "-Dorg.gradle.appname=%APP_BASE_NAME%" -classpath "%CLASSPATH%" org.gradle.wrapper.GradleWrapperMain %*

:end
@rem End local scope for the variables with windows NT shell
if %ERRORLEVEL% equ 0 goto mainEnd

:fail
rem Set variable GRADLE_EXIT_CONSOLE if you need the _script_ return code instead of
rem the _cmd.exe /c_ return code!
set EXIT_CODE=%ERRORLEVEL%
if %EXIT_CODE% equ 0 set EXIT_CODE=1
if not ""=="%GRADLE_EXIT_CONSOLE%" exit %EXIT_CODE%
exit /b %EXIT_CODE%

:mainEnd
if "%OS%"=="Windows_NT" endlocal

:omega

```

Contents of settings.gradle:
```
rootProject.name = 'digitalmine'

```

Contents of gradle/wrapper/gradle-wrapper.jar:
```
[Could not decode file contents]

```

Contents of gradle/wrapper/gradle-wrapper.properties:
```
distributionBase=GRADLE_USER_HOME
distributionPath=wrapper/dists
distributionUrl=https\://services.gradle.org/distributions/gradle-8.13-bin.zip
networkTimeout=10000
validateDistributionUrl=true
zipStoreBase=GRADLE_USER_HOME
zipStorePath=wrapper/dists

```

Contents of src/test/java/ru/gigastack/digitalmine/DigitalmineApplicationTests.java:
```
package ru.gigastack.digitalmine;

import org.junit.jupiter.api.Test;
import org.springframework.boot.test.context.SpringBootTest;

@SpringBootTest
class DigitalmineApplicationTests {

	//@Test
	//void contextLoads() {
	//}

}

```

Contents of src/main/resources/logback-spring.xml:
```
<?xml version="1.0" encoding="UTF-8"?>
<configuration>
    <!-- –û–ø—Ä–µ–¥–µ–ª—è–µ–º —à–∞–±–ª–æ–Ω –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è -->
    <property name="LOG_PATTERN" value="%d{yyyy-MM-dd HH:mm:ss} %-5level %logger{36} - %msg%n"/>

    <!-- –ö–æ–Ω—Å–æ–ª—å–Ω—ã–π –∞–ø–ø–µ–Ω–¥–µ—Ä -->
    <appender name="CONSOLE" class="ch.qos.logback.core.ConsoleAppender">
        <encoder>
            <pattern>${LOG_PATTERN}</pattern>
        </encoder>
    </appender>

    <!-- –£—Ä–æ–≤–µ–Ω—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é -->
    <root level="INFO">
        <appender-ref ref="CONSOLE" />
    </root>

    <!-- –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è –ø–∞–∫–µ—Ç–∞ –≤–∞—à–µ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è -->
    <logger name="ru.gigastack.digitalmine" level="DEBUG"/>
</configuration>
```

Contents of src/main/resources/application.properties:
```
spring.application.name=digitalmine
spring.datasource.url=jdbc:postgresql://localhost:5432/mydatabase
spring.datasource.username=postgres
spring.datasource.password=
spring.jpa.hibernate.ddl-auto=update
jwt.secret=SuperLongSecretKeyAtLeast64Bytes12345678901234567890123456789012
spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.PostgreSQLDialect


```

Contents of src/main/java/ru/gigastack/digitalmine/DigitalmineApplication.java:
```
package ru.gigastack.digitalmine;

import org.springframework.boot.CommandLineRunner;
import org.springframework.boot.SpringApplication;
import org.springframework.boot.autoconfigure.SpringBootApplication;
import org.springframework.context.annotation.Bean;
import ru.gigastack.digitalmine.service.UserService;

@SpringBootApplication
public class DigitalmineApplication {
	@Bean
	public CommandLineRunner dataInitializer(UserService userService) {
		return args -> {
			if (userService.findByUsername("admin").isEmpty()) {
				userService.registerUser("admin", "admin", "ADMIN");
			}
		};
	}
	public static void main(String[] args) {

		SpringApplication.run(DigitalmineApplication.class, args);

	}

}

```

Contents of src/main/java/ru/gigastack/digitalmine/dto/SensorDataDto.java:
```
package ru.gigastack.digitalmine.dto;

import jakarta.validation.constraints.NotNull;
import lombok.Data;

@Data
public class SensorDataDto {

    @NotNull(message = "–£—Ä–æ–≤–µ–Ω—å –≥–∞–∑–∞ –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å null")
    private Double gasLevel;

    @NotNull(message = "–¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞ –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å null")
    private Double temperature;

    @NotNull(message = "–í–ª–∞–∂–Ω–æ—Å—Ç—å –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å null")
    private Double humidity;

    // –ü—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –º–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è, –Ω–∞–ø—Ä–∏–º–µ—Ä, –≤—Ä–µ–º—è –∏–∑–º–µ—Ä–µ–Ω–∏—è, ID –¥–∞—Ç—á–∏–∫–∞ –∏ —Ç.–¥.
}
```

Contents of src/main/java/ru/gigastack/digitalmine/dto/LightingControlDto.java:
```
package ru.gigastack.digitalmine.dto;

import jakarta.validation.constraints.NotNull;
import jakarta.validation.constraints.Pattern;
import lombok.Data;

@Data
public class LightingControlDto {
    @NotNull(message = "–°–æ—Å—Ç–æ—è–Ω–∏–µ –≤–∫–ª—é—á–µ–Ω–∏—è –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å null")
    private Boolean power;

    // –¶–≤–µ—Ç –≤ —Ñ–æ—Ä–º–∞—Ç–µ HEX. –ü—Ä–∏–º–µ—Ä: #FFFFFF, #ff0000
    @NotNull(message = "–¶–≤–µ—Ç –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å null")
    @Pattern(regexp = "^#[0-9A-Fa-f]{6}$", message = "–¶–≤–µ—Ç –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –≤ —Ñ–æ—Ä–º–∞—Ç–µ #RRGGBB (HEX)")
    private String color;

    @NotNull(message = "–Ø—Ä–∫–æ—Å—Ç—å –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å null")
    private Integer brightness;
}
```

Contents of src/main/java/ru/gigastack/digitalmine/dto/CameraControlDto.java:
```
package ru.gigastack.digitalmine.dto;

import jakarta.validation.constraints.NotNull;
import lombok.Data;

@Data
public class CameraControlDto {

    @NotNull(message = "–£–≥–æ–ª –ø–æ–≤–æ—Ä–æ—Ç–∞ –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å null")
    private Integer rotationAngle;

    @NotNull(message = "–§–ª–∞–≥ –ø–æ–¥—Å–≤–µ—Ç–∫–∏ –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å null")
    private Boolean lightOn;

    @NotNull(message = "–ò–Ω—Ç–µ–Ω—Å–∏–≤–Ω–æ—Å—Ç—å –ø–æ–¥—Å–≤–µ—Ç–∫–∏ –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å null")
    private Integer lightIntensity;
}
```

Contents of src/main/java/ru/gigastack/digitalmine/dto/RFIDDto.java:
```
package ru.gigastack.digitalmine.dto;

import jakarta.validation.constraints.NotBlank;
import lombok.Data;

@Data
public class RFIDDto {
    @NotBlank(message = "ID –º–µ—Ç–∫–∏ –Ω–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –ø—É—Å—Ç—ã–º")
    private String tagId;

    // –ù–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ–µ –ø–æ–ª–µ, —É–∫–∞–∑—ã–≤–∞—é—â–µ–µ –¥–µ–π—Å—Ç–≤–∏–µ, –Ω–∞–ø—Ä–∏–º–µ—Ä "enter" –∏–ª–∏ "exit"
    private String action;

    private String status;
}
```

Contents of src/main/java/ru/gigastack/digitalmine/repository/RfidLogRepository.java:
```
package ru.gigastack.digitalmine.repository;

import org.springframework.data.jpa.repository.JpaRepository;
import org.springframework.stereotype.Repository;
import ru.gigastack.digitalmine.model.RfidLog;

@Repository
public interface RfidLogRepository extends JpaRepository<RfidLog, Long> {
    // –ü—Ä–∏ –∂–µ–ª–∞–Ω–∏–∏ –º–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –º–µ—Ç–æ–¥—ã –ø–æ–∏—Å–∫–∞ –ø–æ tagId –∏–ª–∏ –¥—Ä—É–≥–∏–º –ø–æ–ª—è–º
}
```

Contents of src/main/java/ru/gigastack/digitalmine/repository/UserRepository.java:
```
package ru.gigastack.digitalmine.repository;

import ru.gigastack.digitalmine.model.User;
import org.springframework.data.jpa.repository.JpaRepository;
import org.springframework.stereotype.Repository;
import java.util.Optional;

@Repository
public interface UserRepository extends JpaRepository<User, Long> {
    Optional<User> findByUsername(String username);
}
```

Contents of src/main/java/ru/gigastack/digitalmine/repository/SensorDataRepository.java:
```
package ru.gigastack.digitalmine.repository;

import org.springframework.data.domain.Page;
import org.springframework.data.domain.Pageable;
import org.springframework.data.jpa.repository.JpaRepository;
import ru.gigastack.digitalmine.model.SensorData;

import java.time.LocalDateTime;
import java.util.Optional;

public interface SensorDataRepository extends JpaRepository<SensorData, Long> {

    // –ù–∞–π—Ç–∏ –≤—Å–µ –∑–∞–ø–∏—Å–∏ —Å —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–æ–π –ø–æ timestamp (–ø–æ —É–±—ã–≤–∞–Ω–∏—é)
    Page<SensorData> findAllByOrderByTimestampDesc(Pageable pageable);

    // –ù–∞–π—Ç–∏ –∑–∞–ø–∏—Å–∏, —É –∫–æ—Ç–æ—Ä—ã—Ö timestamp >= start AND timestamp <= end
    Page<SensorData> findByTimestampBetweenOrderByTimestampDesc(LocalDateTime start, LocalDateTime end, Pageable pageable);

    // –ù–∞–π—Ç–∏ –∑–∞–ø–∏—Å–∏, —É –∫–æ—Ç–æ—Ä—ã—Ö timestamp >= start
    Page<SensorData> findByTimestampGreaterThanEqualOrderByTimestampDesc(LocalDateTime start, Pageable pageable);

    // –ù–∞–π—Ç–∏ –∑–∞–ø–∏—Å–∏, —É –∫–æ—Ç–æ—Ä—ã—Ö timestamp <= end
    Page<SensorData> findByTimestampLessThanEqualOrderByTimestampDesc(LocalDateTime end, Pageable pageable);

    Optional<SensorData> findTopByOrderByTimestampDesc();
}
```

Contents of src/main/java/ru/gigastack/digitalmine/config/SecurityConfig.java:
```
package ru.gigastack.digitalmine.config;

import jakarta.servlet.http.HttpServletResponse;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.context.annotation.Bean;
import org.springframework.context.annotation.Configuration;
import org.springframework.security.authentication.AuthenticationManager;
import org.springframework.security.config.annotation.authentication.configuration.AuthenticationConfiguration;
import org.springframework.security.config.annotation.web.builders.HttpSecurity;
import org.springframework.security.config.http.SessionCreationPolicy;
import org.springframework.security.core.userdetails.UserDetailsService;
import org.springframework.security.crypto.bcrypt.BCryptPasswordEncoder;
import org.springframework.security.crypto.password.PasswordEncoder;
import org.springframework.security.web.SecurityFilterChain;
import org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter;
import ru.gigastack.digitalmine.security.JwtAuthenticationFilter;

@Configuration
public class SecurityConfig {

    @Autowired
    private UserDetailsService customUserDetailsService;

    @Bean
    public JwtAuthenticationFilter jwtAuthenticationFilter() {
        return new JwtAuthenticationFilter();
    }

    @Bean
    public SecurityFilterChain filterChain(HttpSecurity http) throws Exception {
        http
                .csrf(csrf -> csrf.disable())
                .exceptionHandling(ex -> ex
                        .authenticationEntryPoint((request, response, authException) ->
                                response.sendError(HttpServletResponse.SC_UNAUTHORIZED))
                )
                .sessionManagement(session -> session.sessionCreationPolicy(SessionCreationPolicy.STATELESS))
                .authorizeHttpRequests(auth -> auth
                        .requestMatchers("/api/auth/**", "/swagger-ui/**", "/v3/api-docs/**").permitAll()
                        .anyRequest().authenticated()
                );
        http.addFilterBefore(jwtAuthenticationFilter(), UsernamePasswordAuthenticationFilter.class);
        return http.build();
    }

    @Bean
    public AuthenticationManager authenticationManager(AuthenticationConfiguration authConfig) throws Exception {
        return authConfig.getAuthenticationManager();
    }

    @Bean
    public PasswordEncoder passwordEncoder() {
        return new BCryptPasswordEncoder();
    }
}
```

Contents of src/main/java/ru/gigastack/digitalmine/config/OpenApiConfig.java:
```
package ru.gigastack.digitalmine.config;

import io.swagger.v3.oas.models.Components;
import io.swagger.v3.oas.models.OpenAPI;
import io.swagger.v3.oas.models.security.*;
import io.swagger.v3.oas.models.security.SecurityScheme.In;
import io.swagger.v3.oas.models.security.SecurityScheme.Type;
import io.swagger.v3.oas.models.info.Info;
import io.swagger.v3.oas.models.security.SecurityRequirement;

import org.springdoc.core.models.GroupedOpenApi;
import org.springframework.context.annotation.Bean;
import org.springframework.context.annotation.Configuration;

@Configuration
public class OpenApiConfig {

    @Bean
    public OpenAPI customOpenAPI() {
        return new OpenAPI()
                .info(new Info().title("DigitalMine API").version("v1"))
                .addSecurityItem(new SecurityRequirement().addList("bearerAuth"))
                .components(new Components().addSecuritySchemes(
                        "bearerAuth",
                        new SecurityScheme()
                                .type(SecurityScheme.Type.HTTP)
                                .scheme("bearer")
                                .bearerFormat("JWT")
                ));
    }

    @Bean
    public GroupedOpenApi publicApi() {
        // –û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û —É–∫–∞–∑—ã–≤–∞–µ–º packagesToScan
        return GroupedOpenApi.builder()
                .group("digitalmine-public")
                .packagesToScan("ru.gigastack.digitalmine.controller")
                .build();
    }
}
```

Contents of src/main/java/ru/gigastack/digitalmine/config/WebConfig.java:
```
package ru.gigastack.digitalmine.config;

import org.springframework.context.annotation.Bean;
import org.springframework.context.annotation.Configuration;
import org.springframework.web.servlet.config.annotation.CorsRegistry;
import org.springframework.web.servlet.config.annotation.WebMvcConfigurer;

@Configuration
public class WebConfig {
    @Bean
    public WebMvcConfigurer corsConfigurer() {
        return new WebMvcConfigurer() {
            @Override
            public void addCorsMappings(CorsRegistry registry) {
                registry.addMapping("/**")
                        .allowedOrigins("http://localhost:3000", "http://backend.gigafs.v6.navy")
                        .allowedMethods("GET", "POST", "PUT", "DELETE", "OPTIONS")
                        .allowedHeaders("*");
            }
        };
    }
}
```

Contents of src/main/java/ru/gigastack/digitalmine/config/WebSocketConfig.java:
```
package ru.gigastack.digitalmine.config;

import org.springframework.context.annotation.Configuration;
import org.springframework.messaging.simp.config.MessageBrokerRegistry;
import org.springframework.web.socket.config.annotation.EnableWebSocketMessageBroker;
import org.springframework.web.socket.config.annotation.StompEndpointRegistry;
import org.springframework.web.socket.config.annotation.WebSocketMessageBrokerConfigurer;

@Configuration
@EnableWebSocketMessageBroker
public class WebSocketConfig implements WebSocketMessageBrokerConfigurer {

    // –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –±—Ä–æ–∫–µ—Ä–∞ —Å–æ–æ–±—â–µ–Ω–∏–π: –º—ã –∏—Å–ø–æ–ª—å–∑—É–µ–º –ø—Ä–æ—Å—Ç–æ–π in-memory –±—Ä–æ–∫–µ—Ä –¥–ª—è —Å–æ–æ–±—â–µ–Ω–∏–π,
    // –∫–æ—Ç–æ—Ä—ã–µ –±—É–¥—É—Ç –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å—Å—è –∫–ª–∏–µ–Ω—Ç–∞–º (–Ω–∞–ø—Ä–∏–º–µ—Ä, –Ω–∞ —Ç–æ–ø–∏–∫–∏ /topic –∏–ª–∏ /queue).
    @Override
    public void configureMessageBroker(MessageBrokerRegistry config) {
        config.enableSimpleBroker("/topic", "/queue");
        // –ü—Ä–µ—Ñ–∏–∫—Å, —Å –∫–æ—Ç–æ—Ä–æ–≥–æ –Ω–∞—á–∏–Ω–∞—é—Ç—Å—è –≤—Å–µ —Å–æ–æ–±—â–µ–Ω–∏—è, –æ—Ç–ø—Ä–∞–≤–ª—è–µ–º—ã–µ —Å –∫–ª–∏–µ–Ω—Ç–∞ –Ω–∞ —Å–µ—Ä–≤–µ—Ä.
        config.setApplicationDestinationPrefixes("/app");
    }

    // –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –∫–æ–Ω–µ—á–Ω–æ–π —Ç–æ—á–∫–∏, —á–µ—Ä–µ–∑ –∫–æ—Ç–æ—Ä—É—é –∫–ª–∏–µ–Ω—Ç—ã –±—É–¥—É—Ç –ø–æ–¥–∫–ª—é—á–∞—Ç—å—Å—è –∫ WebSocket.
    @Override
    public void registerStompEndpoints(StompEndpointRegistry registry) {
        registry.addEndpoint("/ws")
                // –†–∞–∑—Ä–µ—à–∞–µ–º –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ —Å –ª—é–±—ã—Ö –¥–æ–º–µ–Ω–æ–≤ (–ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –æ–≥—Ä–∞–Ω–∏—á—å—Ç–µ —Å–ø–∏—Å–æ–∫)
                .setAllowedOriginPatterns("*")
                // –ü–æ–¥–¥–µ—Ä–∂–∫–∞ SockJS –¥–ª—è –æ–±–µ—Å–ø–µ—á–µ–Ω–∏—è –∫—Ä–æ—Å—Å–±—Ä–∞—É–∑–µ—Ä–Ω–æ—Å—Ç–∏
                .withSockJS();
    }
}
```

Contents of src/main/java/ru/gigastack/digitalmine/security/JwtAuthenticationFilter.java:
```
package ru.gigastack.digitalmine.security;

import jakarta.servlet.FilterChain;
import jakarta.servlet.ServletException;
import jakarta.servlet.http.HttpServletRequest;
import jakarta.servlet.http.HttpServletResponse;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.security.core.context.SecurityContextHolder;
import org.springframework.security.authentication.UsernamePasswordAuthenticationToken;
import org.springframework.security.core.userdetails.UserDetails;
import org.springframework.security.core.userdetails.UserDetailsService;
import org.springframework.util.StringUtils;
import org.springframework.web.filter.OncePerRequestFilter;
import java.io.IOException;

public class JwtAuthenticationFilter extends OncePerRequestFilter {

    @Autowired
    private JwtTokenProvider tokenProvider;

    @Autowired
    private UserDetailsService customUserDetailsService;

    @Override
    protected void doFilterInternal(HttpServletRequest request,
                                    HttpServletResponse response,
                                    FilterChain filterChain)
            throws ServletException, IOException {
        try {
            String jwt = getJwtFromRequest(request);
            if (StringUtils.hasText(jwt) && tokenProvider.validateToken(jwt)) {
                String username = tokenProvider.getUsernameFromJWT(jwt);
                UserDetails userDetails = customUserDetailsService.loadUserByUsername(username);
                UsernamePasswordAuthenticationToken authentication =
                        new UsernamePasswordAuthenticationToken(
                                userDetails, null, userDetails.getAuthorities());
                SecurityContextHolder.getContext().setAuthentication(authentication);
            }
        } catch (Exception ex) {
            // –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –æ—à–∏–±–∫–∏ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏
        }
        filterChain.doFilter(request, response);
    }

    private String getJwtFromRequest(HttpServletRequest request) {
        String bearerToken = request.getHeader("Authorization");
        if (StringUtils.hasText(bearerToken) && bearerToken.startsWith("Bearer ")) {
            return bearerToken.substring(7);
        }
        return null;
    }
}
```

Contents of src/main/java/ru/gigastack/digitalmine/security/JwtTokenProvider.java:
```
package ru.gigastack.digitalmine.security;

import io.jsonwebtoken.*;
import io.jsonwebtoken.security.Keys;
import org.springframework.beans.factory.annotation.Value;
import org.springframework.stereotype.Component;
import java.util.Date;

@Component
public class JwtTokenProvider {
    // –ª—É—á—à–µ —Ö—Ä–∞–Ω–∏—Ç—å –≤ application.properties,
    // –Ω–∞–ø—Ä–∏–º–µ—Ä jwt.secret=GjhJKIJhuh8... (–Ω–µ –º–µ–Ω—å—à–µ 64 –±–∞–π—Ç)
    @Value("${jwt.secret}")
    private String jwtSecret;

    @Value("${jwt.expiration:86400000}")
    private long jwtExpirationInMs;

    // –ì–µ–Ω–µ—Ä–∞—Ü–∏—è JWT
    public String generateToken(String username) {
        Date now = new Date();
        Date expiryDate = new Date(now.getTime() + jwtExpirationInMs);

        return Jwts.builder()
                .setSubject(username)
                .setIssuedAt(now)
                .setExpiration(expiryDate)
                // –í–º–µ—Å—Ç–æ .signWith(SignatureAlgorithm.HS512, jwtSecret)
                // –∏—Å–ø–æ–ª—å–∑—É–µ–º —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–π –º–µ—Ç–æ–¥:
                .signWith(Keys.hmacShaKeyFor(jwtSecret.getBytes()), SignatureAlgorithm.HS512)
                .compact();
    }

    // –ò–∑–≤–ª–µ—á–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
    public String getUsernameFromJWT(String token) {
        Claims claims = Jwts.parserBuilder()
                .setSigningKey(Keys.hmacShaKeyFor(jwtSecret.getBytes()))
                .build()
                .parseClaimsJws(token)
                .getBody();
        return claims.getSubject();
    }

    // –í–∞–ª–∏–¥–∞—Ü–∏—è
    public boolean validateToken(String authToken) {
        try {
            Jwts.parserBuilder()
                    .setSigningKey(Keys.hmacShaKeyFor(jwtSecret.getBytes()))
                    .build()
                    .parseClaimsJws(authToken);
            return true;
        } catch (JwtException | IllegalArgumentException ex) {
            // –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
        }
        return false;
    }
}
```

Contents of src/main/java/ru/gigastack/digitalmine/security/CustomUserDetailsService.java:
```
package ru.gigastack.digitalmine.security;

import ru.gigastack.digitalmine.model.User;
import ru.gigastack.digitalmine.repository.UserRepository;
import org.springframework.security.core.userdetails.UserDetails;
import org.springframework.security.core.userdetails.UserDetailsService;
import org.springframework.security.core.userdetails.UsernameNotFoundException;
import org.springframework.stereotype.Service;

@Service
public class CustomUserDetailsService implements UserDetailsService {

    private final UserRepository userRepository;

    public CustomUserDetailsService(UserRepository userRepository) {
        this.userRepository = userRepository;
    }

    @Override
    public UserDetails loadUserByUsername(String username) throws UsernameNotFoundException {
        User user = userRepository.findByUsername(username)
                .orElseThrow(() -> new UsernameNotFoundException("–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–µ –Ω–∞–π–¥–µ–Ω: " + username));
        // –ï—Å–ª–∏ –ø–æ–ª–µ roles —Å–æ–¥–µ—Ä–∂–∏—Ç, –Ω–∞–ø—Ä–∏–º–µ—Ä, —Å—Ç—Ä–æ–∫—É "ADMIN" –∏–ª–∏ "USER", –∏—Å–ø–æ–ª—å–∑—É–µ–º –µ—ë –∫–∞–∫ authorities
        return org.springframework.security.core.userdetails.User
                .withUsername(user.getUsername())
                .password(user.getPassword())
                .authorities(user.getRoles())
                .build();
    }
}
```

Contents of src/main/java/ru/gigastack/digitalmine/controller/ClimateController.java:
```
package ru.gigastack.digitalmine.controller;

import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.data.domain.PageRequest;
import org.springframework.data.domain.Pageable;
import org.springframework.data.domain.Sort;
import org.springframework.format.annotation.DateTimeFormat;
import org.springframework.http.ResponseEntity;
import org.springframework.web.bind.annotation.*;
import ru.gigastack.digitalmine.model.SensorData;
import ru.gigastack.digitalmine.repository.SensorDataRepository;

import java.time.LocalDateTime;
import java.util.List;

@RestController
@RequestMapping("/api/climate")
@CrossOrigin(origins = "*")
public class ClimateController {

    private final SensorDataRepository sensorDataRepository;

    @Autowired
    public ClimateController(SensorDataRepository sensorDataRepository) {
        this.sensorDataRepository = sensorDataRepository;
    }

    @GetMapping("/data")
    public ResponseEntity<List<SensorData>> getClimateData(
            @RequestParam(required = false)
            @DateTimeFormat(iso = DateTimeFormat.ISO.DATE_TIME)
            LocalDateTime start,

            @RequestParam(required = false)
            @DateTimeFormat(iso = DateTimeFormat.ISO.DATE_TIME)
            LocalDateTime end,

            @RequestParam(required = false) Integer limit
    ) {
        if (limit == null || limit <= 0) {
            limit = 100; // –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é –≤–µ—Ä–Ω—ë–º –¥–æ 100 –∑–∞–ø–∏—Å–µ–π
        }

        // –°–æ–∑–¥–∞—ë–º –ø–∞–≥–∏–Ω–∞—Ü–∏—é –∏ —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫—É (—Å–∞–º—ã–µ —Å–≤–µ–∂–∏–µ ‚Äî –ø–µ—Ä–≤—ã–º–∏)
        Pageable pageable = PageRequest.of(0, limit, Sort.by("timestamp").descending());

        List<SensorData> result;

        if (start == null && end == null) {
            // –ù–∏ start, –Ω–∏ end –Ω–µ—Ç: –ø—Ä–æ—Å—Ç–æ –±–µ—Ä—ë–º –≤—Å–µ
            result = sensorDataRepository.findAllByOrderByTimestampDesc(pageable).getContent();

        } else if (start != null && end != null) {
            // –û–±–∞ –∑–∞–¥–∞–Ω—ã: BETWEEN
            result = sensorDataRepository.findByTimestampBetweenOrderByTimestampDesc(start, end, pageable).getContent();

        } else if (start != null) {
            // –¢–æ–ª—å–∫–æ start
            result = sensorDataRepository.findByTimestampGreaterThanEqualOrderByTimestampDesc(start, pageable).getContent();

        } else {
            // –¢–æ–ª—å–∫–æ end
            result = sensorDataRepository.findByTimestampLessThanEqualOrderByTimestampDesc(end, pageable).getContent();
        }

        return ResponseEntity.ok(result);
    }
}
```

Contents of src/main/java/ru/gigastack/digitalmine/controller/LightingController.java:
```
package ru.gigastack.digitalmine.controller;

import com.fasterxml.jackson.core.JsonProcessingException;
import com.fasterxml.jackson.databind.ObjectMapper;
import org.slf4j.Logger;
import org.slf4j.LoggerFactory;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.http.ResponseEntity;
import org.springframework.web.bind.annotation.*;
import ru.gigastack.digitalmine.dto.LightingControlDto;
import ru.gigastack.digitalmine.service.LightingService;
import ru.gigastack.digitalmine.service.MqttClientService;

@RestController
@RequestMapping("/api/lighting")
@CrossOrigin(origins = "*")
public class LightingController {

    private static final Logger logger = LoggerFactory.getLogger(LightingController.class);
    private final LightingService lightingService;
    private final MqttClientService mqttClientService;
    @Autowired
    private ObjectMapper objectMapper;

    public LightingController(LightingService lightingService, MqttClientService mqttClientService) {
        this.lightingService = lightingService;
        this.mqttClientService = mqttClientService;
    }

    @PostMapping("/web")
    public ResponseEntity<String> controlLightingWeb(@RequestBody LightingControlDto controlDto) throws JsonProcessingException {
        logger.info("–ü–æ–ª—É—á–µ–Ω–∞ –∫–æ–º–∞–Ω–¥–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –æ—Å–≤–µ—â–µ–Ω–∏–µ–º —á–µ—Ä–µ–∑ –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å: {}", controlDto);
        lightingService.updateUserSettings(controlDto);
        // –û—Ç–ø—Ä–∞–≤–∫–∞ –∫–æ–º–∞–Ω–¥—ã –Ω–∞ MQTT –±—Ä–æ–∫–µ—Ä
        String jsonPayload = objectMapper.writeValueAsString(controlDto);
        mqttClientService.publish("lighting/control", jsonPayload);
        return ResponseEntity.ok("–ö–æ–º–∞–Ω–¥–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –æ—Å–≤–µ—â–µ–Ω–∏–µ–º –æ–±—Ä–∞–±–æ—Ç–∞–Ω–∞");
    }

    @PostMapping("/restore")
    public ResponseEntity<String> restoreLightingSettings() {
        lightingService.restoreUserSettings();
        mqttClientService.publish("lighting/control", "restore");
        logger.info("–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –æ—Å–≤–µ—â–µ–Ω–∏—è –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã");
        return ResponseEntity.ok("–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –æ—Å–≤–µ—â–µ–Ω–∏—è –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã");
    }

    @PostMapping("/port")
    public ResponseEntity<String> controlLightingPort(@RequestBody LightingControlDto controlDto) throws JsonProcessingException {
        logger.info("–ü–æ–ª—É—á–µ–Ω–∞ –∫–æ–º–∞–Ω–¥–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –æ—Å–≤–µ—â–µ–Ω–∏–µ–º —á–µ—Ä–µ–∑ –º–æ–Ω–∏—Ç–æ—Ä –ø–æ—Ä—Ç–∞: {}", controlDto);
        lightingService.updateUserSettings(controlDto);
        String jsonPayload = objectMapper.writeValueAsString(controlDto);
        mqttClientService.publish("lighting/control", jsonPayload);
        return ResponseEntity.ok("–ö–æ–º–∞–Ω–¥–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –æ—Å–≤–µ—â–µ–Ω–∏–µ–º —á–µ—Ä–µ–∑ –º–æ–Ω–∏—Ç–æ—Ä –ø–æ—Ä—Ç–∞ –æ–±—Ä–∞–±–æ—Ç–∞–Ω–∞");
    }

    @GetMapping("/status")
    public ResponseEntity<LightingControlDto> getLightingStatus() {
        return ResponseEntity.ok(lightingService.getCurrentSettings());
    }
}
```

Contents of src/main/java/ru/gigastack/digitalmine/controller/AuthController.java:
```
package ru.gigastack.digitalmine.controller;

import jakarta.validation.Valid;
import lombok.Data;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.http.ResponseEntity;
import org.springframework.web.bind.annotation.*;
import ru.gigastack.digitalmine.model.User;
import ru.gigastack.digitalmine.security.JwtTokenProvider;
import ru.gigastack.digitalmine.service.UserService;
import org.springframework.security.crypto.password.PasswordEncoder;

@RestController
@RequestMapping("/api/auth")
@CrossOrigin(origins = "*")
public class AuthController {

    @Autowired
    private UserService userService;

    @Autowired
    private JwtTokenProvider tokenProvider;

    @Autowired
    private PasswordEncoder passwordEncoder;

    @PostMapping("/register")
    public ResponseEntity<?> register(@Valid @RequestBody RegisterRequest registerRequest) {
        User user = userService.registerUser(registerRequest.getUsername(), registerRequest.getPassword(), "USER");
        return ResponseEntity.ok("–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω: " + user.getUsername());
    }

    @PostMapping("/login")
    public ResponseEntity<?> login(@Valid @RequestBody LoginRequest loginRequest) {
        User user = userService.findByUsername(loginRequest.getUsername())
                .orElseThrow(() -> new RuntimeException("–ù–µ–≤–µ—Ä–Ω–æ–µ –∏–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏–ª–∏ –ø–∞—Ä–æ–ª—å"));

        if (!passwordEncoder.matches(loginRequest.getPassword(), user.getPassword())) {
            throw new RuntimeException("–ù–µ–≤–µ—Ä–Ω–æ–µ –∏–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏–ª–∏ –ø–∞—Ä–æ–ª—å");
        }

        String token = tokenProvider.generateToken(user.getUsername());
        return ResponseEntity.ok(new JwtAuthenticationResponse(token));
    }

    @Data
    public static class RegisterRequest {
        private String username;
        private String password;
    }

    @Data
    public static class LoginRequest {
        private String username;
        private String password;
    }

    @Data
    public static class JwtAuthenticationResponse {
        private final String accessToken;
    }
}
```

Contents of src/main/java/ru/gigastack/digitalmine/controller/VehicleController.java:
```
package ru.gigastack.digitalmine.controller;

import org.slf4j.Logger;
import org.slf4j.LoggerFactory;
import org.springframework.http.ResponseEntity;
import org.springframework.web.bind.annotation.*;
import ru.gigastack.digitalmine.service.MqttClientService;
import ru.gigastack.digitalmine.service.VehicleService;

@RestController
@RequestMapping("/api/vehicle")
@CrossOrigin(origins = "*")
public class VehicleController {

    private static final Logger logger = LoggerFactory.getLogger(VehicleController.class);
    private final VehicleService vehicleService;
    private final MqttClientService mqttClientService;

    public VehicleController(VehicleService vehicleService, MqttClientService mqttClientService) {
        this.vehicleService = vehicleService;
        this.mqttClientService = mqttClientService;
    }

    @PostMapping("/control/start")
    public ResponseEntity<String> startVehicleRoute() {
        logger.info("–ò–Ω–∏—Ü–∏–∏—Ä–æ–≤–∞–Ω —Å—Ç–∞—Ä—Ç –º–∞—Ä—à—Ä—É—Ç–∞ —ç–ª–µ–∫—Ç—Ä–æ–º–æ–±–∏–ª—è");
        vehicleService.startRoute();
        mqttClientService.publish("vehicle/control", "start_route");
        return ResponseEntity.ok("–ú–∞—Ä—à—Ä—É—Ç —ç–ª–µ–∫—Ç—Ä–æ–º–æ–±–∏–ª—è –∑–∞–ø—É—â–µ–Ω");
    }

    /**
     * –ü—Ä–∏–º–µ—Ä —Ä—É—á–Ω–æ–≥–æ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —á–µ—Ä–µ–∑ POST /api/vehicle/control/move?direction=forward/backward/left/right
     * –ú–æ–∂–Ω–æ –ø–µ—Ä–µ–¥–∞–≤–∞—Ç—å –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –≤ JSON, –µ—Å–ª–∏ —É–¥–æ–±–Ω–µ–µ.
     */
    @PostMapping("/control/move")
    public ResponseEntity<String> moveVehicle(@RequestParam String direction) {
        logger.info("–ü–æ–ª—É—á–µ–Ω–∞ –∫–æ–º–∞–Ω–¥–∞ —Ä—É—á–Ω–æ–≥–æ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è: {}", direction);

        // –ú–æ–∂–Ω–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –ª–æ–≥–∏–∫—É –≤–æ VehicleService, –ª–∏–±–æ –ø—Ä—è–º–æ —Ç—É—Ç.
        // –î–ª—è –ø—Ä–∏–º–µ—Ä–∞ - –ø—Ä–æ—Å—Ç–æ –æ—Ç–ø—Ä–∞–≤–ª—è–µ–º MQTT-–∫–æ–º–∞–Ω–¥—É –≤ "vehicle/control".
        String mqttPayload;
        switch (direction.toLowerCase()) {
            case "forward":
                mqttPayload = "move_forward";
                break;
            case "backward":
                mqttPayload = "move_backward";
                break;
            case "left":
                mqttPayload = "turn_left";
                break;
            case "right":
                mqttPayload = "turn_right";
                break;
            default:
                // –ù–µ–≤–µ—Ä–Ω–æ–µ –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ
                logger.warn("–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–∞—è –∫–æ–º–∞–Ω–¥–∞ –¥–≤–∏–∂–µ–Ω–∏—è: {}", direction);
                return ResponseEntity.badRequest().body("–ù–µ–∏–∑–≤–µ—Å—Ç–Ω–∞—è –∫–æ–º–∞–Ω–¥–∞: " + direction);
        }
        mqttClientService.publish("vehicle/control", mqttPayload);

        logger.info("MQTT-–∫–æ–º–∞–Ω–¥–∞ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∞: {}", mqttPayload);
        return ResponseEntity.ok("–í—ã–ø–æ–ª–Ω–µ–Ω–∞ –∫–æ–º–∞–Ω–¥–∞: " + mqttPayload);
    }

    @PostMapping("/control/penalty")
    public ResponseEntity<String> recordPenalty() {
        logger.info("–ó–∞—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–æ —Å—Ç–æ–ª–∫–Ω–æ–≤–µ–Ω–∏–µ —Å –∫–æ–Ω—É—Å–æ–º");
        vehicleService.addPenalty();
        return ResponseEntity.ok("–®—Ç—Ä–∞—Ñ –Ω–∞—á–∏—Å–ª–µ–Ω. –¢–µ–∫—É—â–∏–π —à—Ç—Ä–∞—Ñ: " + vehicleService.getPenaltyCount());
    }

    // –ü—Ä–∏–º–µ—Ä –ø–æ–ª—É—á–µ–Ω–∏—è —Å—Ç–∞—Ç—É—Å–∞: —à—Ç—Ä–∞—Ñ—ã, —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∏ —Ç.–ø.
    @GetMapping("/status")
    public ResponseEntity<String> getVehicleStatus() {
        return ResponseEntity.ok("–¢–µ–∫—É—â–∏–π —à—Ç—Ä–∞—Ñ: " + vehicleService.getPenaltyCount());
    }
}
```

Contents of src/main/java/ru/gigastack/digitalmine/controller/CameraController.java:
```
package ru.gigastack.digitalmine.controller;

import org.slf4j.Logger;
import org.slf4j.LoggerFactory;
import org.springframework.http.ResponseEntity;
import org.springframework.web.bind.annotation.*;
import ru.gigastack.digitalmine.dto.CameraControlDto;
import ru.gigastack.digitalmine.service.MqttClientService;

import java.util.Arrays;
import java.util.HashMap;
import java.util.List;
import java.util.Map;

@RestController
@RequestMapping("/api/camera")
@CrossOrigin(origins = "*")
public class CameraController {

    private static final Logger logger = LoggerFactory.getLogger(CameraController.class);
    private final MqttClientService mqttClientService;

    public CameraController(MqttClientService mqttClientService) {
        this.mqttClientService = mqttClientService;
    }

    @PostMapping("/control")
    public ResponseEntity<String> controlCamera(@RequestBody CameraControlDto command) {
        logger.info("–ü–æ–ª—É—á–µ–Ω–∞ –∫–æ–º–∞–Ω–¥–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∫–∞–º–µ—Ä–æ–π: {}", command);

        String mqttPayload = String.format("rotate:%d,lightOn:%b,intensity:%d",
                command.getRotationAngle(),
                command.getLightOn(),
                command.getLightIntensity());
        mqttClientService.publish("camera/control", mqttPayload);

        return ResponseEntity.ok("–ö–æ–º–∞–Ω–¥–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∫–∞–º–µ—Ä–æ–π –æ–±—Ä–∞–±–æ—Ç–∞–Ω–∞");
    }

    @GetMapping("/recognize")
    public ResponseEntity<Map<String, Object>> recognizeObjects() {
        // –°–∏–º—É–ª—è—Ü–∏—è —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏—è –æ–±—ä–µ–∫—Ç–æ–≤ –±–µ–∑ –∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏–∏
        List<String> objects = Arrays.asList("–î–µ—Ç–∞–ª—å1", "–î–µ—Ç–∞–ª—å2", "–ß–µ–ª–æ–≤–µ–∫");
        Map<String, Object> response = new HashMap<>();
        response.put("recognizedObjects", objects);
        logger.info("–†–∞—Å–ø–æ–∑–Ω–∞–Ω—ã –æ–±—ä–µ–∫—Ç—ã (–±–µ–∑ –∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏–∏): {}", objects);
        return ResponseEntity.ok(response);
    }

    @GetMapping("/recognize/classified")
    public ResponseEntity<Map<String, Object>> recognizeObjectsWithClassification() {
        // –°–∏–º—É–ª—è—Ü–∏—è —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏—è –æ–±—ä–µ–∫—Ç–æ–≤ —Å –∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏–µ–π
        List<Map<String, Object>> objects = Arrays.asList(
                new HashMap<String, Object>() {{
                    put("object", "–ß–µ–ª–æ–≤–µ–∫");
                    put("confidence", 0.95);
                }},
                new HashMap<String, Object>() {{
                    put("object", "–ì—Ä—É–∑–æ–≤–∏–∫");
                    put("confidence", 0.90);
                }},
                new HashMap<String, Object>() {{
                    put("object", "–û–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏–µ");
                    put("confidence", 0.85);
                }}
        );
        Map<String, Object> response = new HashMap<>();
        response.put("recognizedObjects", objects);
        logger.info("–†–∞—Å–ø–æ–∑–Ω–∞–Ω—ã –æ–±—ä–µ–∫—Ç—ã —Å –∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏–µ–π: {}", objects);
        return ResponseEntity.ok(response);
    }
}
```

Contents of src/main/java/ru/gigastack/digitalmine/controller/RFIDController.java:
```
package ru.gigastack.digitalmine.controller;

import org.slf4j.Logger;
import org.slf4j.LoggerFactory;
import org.springframework.http.ResponseEntity;
import org.springframework.web.bind.annotation.*;
import ru.gigastack.digitalmine.dto.RFIDDto;
import ru.gigastack.digitalmine.model.RfidLog;
import ru.gigastack.digitalmine.repository.RfidLogRepository;
import ru.gigastack.digitalmine.service.LightingService;

import java.time.LocalDateTime;
import java.util.List;

@RestController
@RequestMapping("/api/rfid")
@CrossOrigin(origins = "*")
public class RFIDController {

    private static final Logger logger = LoggerFactory.getLogger(RFIDController.class);

    private final LightingService lightingService;
    private final RfidLogRepository rfidLogRepository;

    public RFIDController(LightingService lightingService, RfidLogRepository rfidLogRepository) {
        this.lightingService = lightingService;
        this.rfidLogRepository = rfidLogRepository;
    }

    @PostMapping("/scan")
    public ResponseEntity<String> scanRFID(@RequestBody RFIDDto rfidDto) {
        logger.info("–°—á–∏—Ç–∞–Ω–∞ RFID –º–µ—Ç–∫–∞: {}", rfidDto.getTagId());

        // –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ —Ç–∞–±–ª–∏—Ü—É rfid_log
        RfidLog rfidLog = new RfidLog();
        rfidLog.setTagId(rfidDto.getTagId());
        // –ï—Å–ª–∏ action –Ω–µ –ø–µ—Ä–µ–¥–∞–ª–∏, —Å—á–∏—Ç–∞–µ–º, —á—Ç–æ —ç—Ç–æ "enter"
        String action = (rfidDto.getAction() == null || rfidDto.getAction().isBlank())
                ? "enter"
                : rfidDto.getAction().toLowerCase();

        rfidLog.setAction(action);
        rfidLog.setTimestamp(LocalDateTime.now());
        rfidLogRepository.save(rfidLog);

        // –õ–æ–≥–∏—Ä—É–µ–º
        logger.info("RFID –¥–∞–Ω–Ω—ã–µ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω—ã –Ω–∞ –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å: {}, –¥–µ–π—Å—Ç–≤–∏–µ: {}", rfidDto.getTagId(), action);

        // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ—Å–≤–µ—â–µ–Ω–∏–µ–º –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –¥–µ–π—Å—Ç–≤–∏—è
        switch (action) {
            case "exit":
                logger.info("–û—Å–≤–µ—â–µ–Ω–∏–µ: –ñ–Å–õ–¢–´–ô (–≤—ã—Ö–æ–¥)");
                lightingService.overrideLighting("#FFFF00", 100);
                break;
            case "enter":
            default:
                logger.info("–û—Å–≤–µ—â–µ–Ω–∏–µ: –ë–ï–õ–´–ô (–≤—Ö–æ–¥)");
                lightingService.overrideLighting("#FFFFFF", 100);
                break;
        }

        return ResponseEntity.ok("RFID –º–µ—Ç–∫–∞ –æ–±—Ä–∞–±–æ—Ç–∞–Ω–∞, –¥–µ–π—Å—Ç–≤–∏–µ: " + action);
    }

    @GetMapping("/logs")
    public ResponseEntity<List<RfidLog>> getAllRfidLogs() {
        List<RfidLog> logs = rfidLogRepository.findAll();
        return ResponseEntity.ok(logs);
    }
}
```

Contents of src/main/java/ru/gigastack/digitalmine/controller/SensorDataController.java:
```
package ru.gigastack.digitalmine.controller;

import jakarta.validation.Valid;
import org.slf4j.Logger;
import org.slf4j.LoggerFactory;
import org.springframework.beans.factory.annotation.Value;
import org.springframework.http.HttpStatus;
import org.springframework.http.ResponseEntity;
import org.springframework.web.bind.annotation.*;
import ru.gigastack.digitalmine.dto.SensorDataDto;
import ru.gigastack.digitalmine.model.SensorData;
import ru.gigastack.digitalmine.repository.SensorDataRepository;
import ru.gigastack.digitalmine.service.LightingService;

import java.time.LocalDateTime;
import java.util.Optional;

@RestController
@RequestMapping("/api/sensors")
@CrossOrigin(origins = "*")
public class SensorDataController {

    private static final Logger logger = LoggerFactory.getLogger(SensorDataController.class);
    private final SensorDataRepository sensorDataRepository;
    private final LightingService lightingService;

    @Value("${sensor.gas.threshold:50.0}")
    private double gasThreshold;

    public SensorDataController(SensorDataRepository sensorDataRepository, LightingService lightingService) {
        this.sensorDataRepository = sensorDataRepository;
        this.lightingService = lightingService;
    }

    @PostMapping("/data")
    public ResponseEntity<String> receiveSensorData(@RequestBody @Valid SensorDataDto sensorDataDto) {
        logger.info("–ü–æ–ª—É—á–µ–Ω—ã –¥–∞–Ω–Ω—ã–µ –¥–∞—Ç—á–∏–∫–∞: {}", sensorDataDto);

        SensorData sensorData = new SensorData();
        sensorData.setGasLevel(sensorDataDto.getGasLevel());
        sensorData.setTemperature(sensorDataDto.getTemperature());
        sensorData.setHumidity(sensorDataDto.getHumidity());
        sensorData.setTimestamp(LocalDateTime.now());

        sensorDataRepository.save(sensorData);
        logger.info("–î–∞–Ω–Ω—ã–µ –¥–∞—Ç—á–∏–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã –≤ –ë–î");

        if (sensorData.getGasLevel() > gasThreshold) {
            logger.warn("–£—Ä–æ–≤–µ–Ω—å –≥–∞–∑–∞ ({}) –ø—Ä–µ–≤—ã—à–∞–µ—Ç –ø–æ—Ä–æ–≥ ({}), –ø–µ—Ä–µ–∫–ª—é—á–∞–µ–º –æ—Å–≤–µ—â–µ–Ω–∏–µ –Ω–∞ –∫—Ä–∞—Å–Ω—ã–π", sensorData.getGasLevel(), gasThreshold);
            lightingService.overrideLighting("#FF0000", 100);
        }

        return ResponseEntity.status(HttpStatus.OK).body("–î–∞–Ω–Ω—ã–µ –ø–æ–ª—É—á–µ–Ω—ã –∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã");
    }

    @GetMapping("/latest")
    public ResponseEntity<SensorData> getLatestSensorData() {
        Optional<SensorData> latestData = sensorDataRepository.findTopByOrderByTimestampDesc();
        return latestData.map(ResponseEntity::ok).orElseGet(() -> ResponseEntity.noContent().build());
    }
}
```

Contents of src/main/java/ru/gigastack/digitalmine/model/SensorData.java:
```
package ru.gigastack.digitalmine.model;

import jakarta.persistence.*;
import lombok.Data;
import lombok.NoArgsConstructor;
import lombok.AllArgsConstructor;
import java.time.LocalDateTime;

@Data
@NoArgsConstructor
@AllArgsConstructor
@Entity
@Table(name = "sensor_data")
public class SensorData {

    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    private Long id;

    @Column(name = "gas_level", nullable = false)
    private Double gasLevel;

    @Column(name = "temperature", nullable = false)
    private Double temperature;

    @Column(name = "humidity", nullable = false)
    private Double humidity;

    @Column(name = "timestamp", nullable = false)
    private LocalDateTime timestamp;
}
```

Contents of src/main/java/ru/gigastack/digitalmine/model/User.java:
```
package ru.gigastack.digitalmine.model;

import jakarta.persistence.*;
import lombok.Data;
import lombok.NoArgsConstructor;

@Data
@NoArgsConstructor
@Entity
@Table(name = "users")
public class User {
    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    private Long id;

    @Column(unique = true, nullable = false)
    private String username;

    @Column(nullable = false)
    private String password; // –•—Ä–∞–Ω–∏—Ç—Å—è –≤ –∑–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω–Ω–æ–º –≤–∏–¥–µ

    // –ù–∞–ø—Ä–∏–º–µ—Ä, —Ä–æ–ª–∏ –º–æ–∂–Ω–æ —Ö—Ä–∞–Ω–∏—Ç—å –≤ –≤–∏–¥–µ —Å—Ç—Ä–æ–∫–∏, —Ä–∞–∑–¥–µ–ª–µ–Ω–Ω–æ–π –∑–∞–ø—è—Ç—ã–º–∏
    private String roles;
}
```

Contents of src/main/java/ru/gigastack/digitalmine/model/RfidLog.java:
```
package ru.gigastack.digitalmine.model;

import jakarta.persistence.*;
import lombok.AllArgsConstructor;
import lombok.Data;
import lombok.NoArgsConstructor;

import java.time.LocalDateTime;

@Data
@NoArgsConstructor
@AllArgsConstructor
@Entity
@Table(name = "rfid_log")
public class RfidLog {
    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    private Long id;

    @Column(name = "tag_id", nullable = false)
    private String tagId;

    @Column(name = "action", nullable = false)
    private String action;

    @Column(name = "status", nullable = false)
    private  String status;

    @Column(name = "timestamp", nullable = false)
    private LocalDateTime timestamp;


}
```

Contents of src/main/java/ru/gigastack/digitalmine/service/UserService.java:
```
package ru.gigastack.digitalmine.service;

import ru.gigastack.digitalmine.model.User;
import ru.gigastack.digitalmine.repository.UserRepository;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.security.crypto.password.PasswordEncoder;
import org.springframework.stereotype.Service;
import java.util.Optional;

@Service
public class UserService {
    private final UserRepository userRepository;
    private final PasswordEncoder passwordEncoder;

    @Autowired
    public UserService(UserRepository userRepository,
                       PasswordEncoder passwordEncoder) {
        this.userRepository = userRepository;
        this.passwordEncoder = passwordEncoder;
    }

    public User registerUser(String username, String rawPassword, String roles) {
        if (userRepository.findByUsername(username).isPresent()) {
            throw new RuntimeException("–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å —Ç–∞–∫–∏–º –∏–º–µ–Ω–µ–º —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç");
        }
        User user = new User();
        user.setUsername(username);
        user.setPassword(passwordEncoder.encode(rawPassword));
        user.setRoles(roles);
        return userRepository.save(user);
    }

    public Optional<User> findByUsername(String username) {
        return userRepository.findByUsername(username);
    }
}
```

Contents of src/main/java/ru/gigastack/digitalmine/service/LightingService.java:
```
package ru.gigastack.digitalmine.service;

import org.slf4j.Logger;
import org.slf4j.LoggerFactory;
import org.springframework.stereotype.Service;
import ru.gigastack.digitalmine.dto.LightingControlDto;

@Service
public class LightingService {

    private static final Logger logger = LoggerFactory.getLogger(LightingService.class);

    // –¢–µ–∫—É—â–∏–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏, —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º
    private LightingControlDto userSettings = new LightingControlDto();
    // –¢–µ–∫—É—â–∏–µ –∞–∫—Ç–∏–≤–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ (–º–æ–≥—É—Ç –±—ã—Ç—å –∏–∑–º–µ–Ω–µ–Ω—ã —Å–∏—Å—Ç–µ–º–æ–π –¥–ª—è —Å–∏–≥–Ω–∞–ª–∏–∑–∞—Ü–∏–∏)
    private LightingControlDto currentSettings = new LightingControlDto();

    public LightingService() {
        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∑–Ω–∞—á–µ–Ω–∏–π –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
        userSettings.setPower(true);
        userSettings.setColor("white");
        userSettings.setBrightness(100);

        // –ò–∑–Ω–∞—á–∞–ª—å–Ω–æ –∞–∫—Ç–∏–≤–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–æ–≤–ø–∞–¥–∞—é—Ç —Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–º–∏
        currentSettings.setPower(userSettings.getPower());
        currentSettings.setColor(userSettings.getColor());
        currentSettings.setBrightness(userSettings.getBrightness());
    }

    // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –Ω–∞—Å—Ç—Ä–æ–µ–∫, —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º
    public void updateUserSettings(LightingControlDto newSettings) {
        logger.info("–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏—Ö –Ω–∞—Å—Ç—Ä–æ–µ–∫ –æ—Å–≤–µ—â–µ–Ω–∏—è: {}", newSettings);
        userSettings.setPower(newSettings.getPower());
        userSettings.setColor(newSettings.getColor());
        userSettings.setBrightness(newSettings.getBrightness());

        // –ü—Ä–∏–º–µ–Ω—è–µ–º –∏–∑–º–µ–Ω–µ–Ω–∏—è –Ω–µ–º–µ–¥–ª–µ–Ω–Ω–æ, –µ—Å–ª–∏ –Ω–µ—Ç —Å–∏–≥–Ω–∞–ª–∏–∑–∞—Ü–∏–∏
        currentSettings.setPower(newSettings.getPower());
        currentSettings.setColor(newSettings.getColor());
        currentSettings.setBrightness(newSettings.getBrightness());

        // –ó–¥–µ—Å—å –º–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –∫–æ–¥ –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ –∫–æ–º–∞–Ω–¥ –Ω–∞ –∞–ø–ø–∞—Ä–∞—Ç–Ω–æ–µ –æ–±–µ—Å–ø–µ—á–µ–Ω–∏–µ
    }

    // –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –Ω–∞—Å—Ç—Ä–æ–µ–∫ –ø—Ä–∏ —Å–∏–≥–Ω–∞–ª–∏–∑–∞—Ü–∏–∏
    public void overrideLighting(String color, Integer brightness) {
        logger.info("–ü–µ—Ä–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –Ω–∞—Å—Ç—Ä–æ–µ–∫ –æ—Å–≤–µ—â–µ–Ω–∏—è –Ω–∞ –∞–≤–∞—Ä–∏–π–Ω—ã–µ: —Ü–≤–µ—Ç={}, —è—Ä–∫–æ—Å—Ç—å={}", color, brightness);
        currentSettings.setColor(color);
        if (brightness != null) {
            currentSettings.setBrightness(brightness);
        }
        // –ó–¥–µ—Å—å –º–æ–∂–Ω–æ –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –∫–æ–º–∞–Ω–¥—É –¥–ª—è –∏–∑–º–µ–Ω–µ–Ω–∏—è –æ—Å–≤–µ—â–µ–Ω–∏—è –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
    }

    // –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏—Ö –Ω–∞—Å—Ç—Ä–æ–µ–∫ –ø–æ—Å–ª–µ —Å–∏–≥–Ω–∞–ª–∏–∑–∞—Ü–∏–∏
    public void restoreUserSettings() {
        logger.info("–í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏—Ö –Ω–∞—Å—Ç—Ä–æ–µ–∫ –æ—Å–≤–µ—â–µ–Ω–∏—è: {}", userSettings);
        currentSettings.setPower(userSettings.getPower());
        currentSettings.setColor(userSettings.getColor());
        currentSettings.setBrightness(userSettings.getBrightness());
        // –û—Ç–ø—Ä–∞–≤–∏—Ç—å –∫–æ–º–∞–Ω–¥—É –¥–ª—è –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è –æ—Å–≤–µ—â–µ–Ω–∏—è
    }

    // –ì–µ—Ç—Ç–µ—Ä –¥–ª—è —Ç–µ–∫—É—â–∏—Ö –Ω–∞—Å—Ç—Ä–æ–µ–∫
    public LightingControlDto getCurrentSettings() {
        return currentSettings;
    }
}
```

Contents of src/main/java/ru/gigastack/digitalmine/service/MqttClientService.java:
```
package ru.gigastack.digitalmine.service;

import com.fasterxml.jackson.databind.ObjectMapper;
import jakarta.annotation.PostConstruct;
import jakarta.annotation.PreDestroy;
import org.eclipse.paho.client.mqttv3.IMqttDeliveryToken;
import org.eclipse.paho.client.mqttv3.MqttCallback;
import org.eclipse.paho.client.mqttv3.MqttClient;
import org.eclipse.paho.client.mqttv3.MqttConnectOptions;
import org.eclipse.paho.client.mqttv3.MqttException;
import org.eclipse.paho.client.mqttv3.MqttMessage;
import org.slf4j.Logger;
import org.slf4j.LoggerFactory;
import org.springframework.messaging.simp.SimpMessagingTemplate;
import org.springframework.stereotype.Service;
import ru.gigastack.digitalmine.dto.SensorDataDto;
import ru.gigastack.digitalmine.model.SensorData;
import ru.gigastack.digitalmine.repository.SensorDataRepository;

import java.time.LocalDateTime;

@Service
public class MqttClientService implements MqttCallback {

    private static final Logger logger = LoggerFactory.getLogger(MqttClientService.class);

    // URL, –ª–æ–≥–∏–Ω –∏ –ø–∞—Ä–æ–ª—å —É –≤–∞—Å —É–∂–µ –ø—Ä–æ–ø–∏—Å–∞–Ω—ã
    private static final String BROKER_URL = "tcp://emqx.gigafs.v6.navy:1883";
    private static final String MQTT_CLIENT_ID = "DigitalMineBackendClient";
    private static final String USERNAME = "admin";
    private static final String PASSWORD = "admin76767676";

    private MqttClient client;

    private final SimpMessagingTemplate messagingTemplate;
    private final SensorDataRepository sensorDataRepository; // <-- –¥–æ–±–∞–≤–ª—è–µ–º
    private final ObjectMapper objectMapper;                 // <-- –¥–ª—è –ø–∞—Ä—Å–∏–Ω–≥–∞ JSON (—á–µ—Ä–µ–∑ Jackson)

    public MqttClientService(SimpMessagingTemplate messagingTemplate,
                             SensorDataRepository sensorDataRepository,  // <-- –≤–Ω–µ–¥—Ä—è–µ–º —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π
                             ObjectMapper objectMapper) {                 // <-- –∏ ObjectMapper
        this.messagingTemplate = messagingTemplate;
        this.sensorDataRepository = sensorDataRepository;
        this.objectMapper = objectMapper;
    }

    @PostConstruct
    public void init() {
        try {
            client = new MqttClient(BROKER_URL, MQTT_CLIENT_ID);

            MqttConnectOptions options = new MqttConnectOptions();
            options.setUserName(USERNAME);
            options.setPassword(PASSWORD.toCharArray());
            options.setCleanSession(true);

            // –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º callbacks
            client.setCallback(this);

            // –ü–æ–¥–∫–ª—é—á–∞–µ–º—Å—è –∫ –±—Ä–æ–∫–µ—Ä—É
            client.connect(options);
            logger.info("Connected to MQTT broker at {}", BROKER_URL);

            // –ü–æ–¥–ø–∏—Å—ã–≤–∞–µ–º—Å—è –Ω–∞ –æ–¥–∏–Ω –∏–ª–∏ –Ω–µ—Å–∫–æ–ª—å–∫–æ —Ç–æ–ø–∏–∫–æ–≤
            client.subscribe("sensors/test");
            logger.info("Subscribed to MQTT topic: sensors/test");

        } catch (MqttException e) {
            logger.error("Error initializing MQTT client", e);
        }
    }

    @Override
    public void connectionLost(Throwable cause) {
        logger.error("MQTT connection lost", cause);
    }

    @Override
    public void messageArrived(String topic, MqttMessage message) {
        // 1) –ü—Ä–µ–æ–±—Ä–∞–∑—É–µ–º payload –≤ —Å—Ç—Ä–æ–∫—É
        String payload = new String(message.getPayload());
        logger.info("Received MQTT message on topic {}: {}", topic, payload);

        // 2) –ï—Å–ª–∏ —É –Ω–∞—Å JSON –¥–∞–Ω–Ω—ã—Ö –¥–∞—Ç—á–∏–∫–æ–≤, –ø—Ä–æ–±—É–µ–º —Ä–∞—Å–ø–∞—Ä—Å–∏—Ç—å
        try {
            // –î–æ–ø—É—Å—Ç–∏–º, payload –ø—Ä–∏—Ö–æ–¥–∏—Ç –≤ —Ç–æ–º –∂–µ —Ñ–æ—Ä–º–∞—Ç–µ, —á—Ç–æ –∏ –≤–∞—à SensorDataDto
            SensorDataDto sensorDataDto = objectMapper.readValue(payload, SensorDataDto.class);

            // 3) –°–æ–∑–¥–∞—ë–º —Å—É—â–Ω–æ—Å—Ç—å –∏ —Å–æ—Ö—Ä–∞–Ω—è–µ–º –≤ –ë–î
            SensorData sensorData = new SensorData();
            sensorData.setGasLevel(sensorDataDto.getGasLevel());
            sensorData.setTemperature(sensorDataDto.getTemperature());
            sensorData.setHumidity(sensorDataDto.getHumidity());
            sensorData.setTimestamp(LocalDateTime.now()); // —Å—Ç–∞–≤–∏–º —Ç–µ–∫—É—â–µ–µ –≤—Ä–µ–º—è –∏–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ–º –∏–∑ DTO

            sensorDataRepository.save(sensorData);
            logger.info("Sensor data saved to DB: {}", sensorData);

        } catch (Exception e) {
            logger.error("Error parsing or saving sensor data from MQTT payload", e);
        }

        // 4) –ü–µ—Ä–µ–¥–∞—ë–º –¥–∞–Ω–Ω—ã–µ —á–µ—Ä–µ–∑ WebSocket –≤—Å–µ–º –ø–æ–¥–ø–∏—Å–∞–Ω–Ω—ã–º –∫–ª–∏–µ–Ω—Ç–∞–º (–ø–æ –∂–µ–ª–∞–Ω–∏—é)
        messagingTemplate.convertAndSend("/topic/sensorData", payload);
        logger.debug("Sent payload via WebSocket to /topic/sensorData");
    }

    @Override
    public void deliveryComplete(IMqttDeliveryToken token) {
        logger.info("MQTT message delivery complete");
    }

    @PreDestroy
    public void shutdown() {
        try {
            if (client != null) {
                client.disconnect();
                logger.info("Disconnected from MQTT broker");
            }
        } catch (MqttException e) {
            logger.error("Error disconnecting MQTT client", e);
        }
    }

    /**
     * –ú–µ—Ç–æ–¥ –¥–ª—è –ø—É–±–ª–∏–∫–∞—Ü–∏–∏ —Å–æ–æ–±—â–µ–Ω–∏–π –≤ MQTT.
     */
    public void publish(String topic, String payload) {
        try {
            MqttMessage message = new MqttMessage(payload.getBytes());
            message.setQos(1);
            client.publish(topic, message);
            logger.info("Published MQTT message to topic {}: {}", topic, payload);
        } catch (MqttException e) {
            logger.error("Error publishing MQTT message", e);
        }
    }
}
```

Contents of src/main/java/ru/gigastack/digitalmine/service/VehicleService.java:
```
package ru.gigastack.digitalmine.service;

import org.slf4j.Logger;
import org.slf4j.LoggerFactory;
import org.springframework.stereotype.Service;

@Service
public class VehicleService {

    private static final Logger logger = LoggerFactory.getLogger(VehicleService.class);
    private int penaltyCount = 0;

    // –°–∏–º—É–ª—è—Ü–∏—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –º–∞—Ä—à—Ä—É—Ç–∞ —ç–ª–µ–∫—Ç—Ä–æ–º–æ–±–∏–ª—è
    public void startRoute() {
        logger.info("–≠–ª–µ–∫—Ç—Ä–æ–º–æ–±–∏–ª—å –Ω–∞—á–∏–Ω–∞–µ—Ç –º–∞—Ä—à—Ä—É—Ç –∏–∑ —Ç–æ—á–∫–∏ –ê –≤ —Ç–æ—á–∫—É –ë, –∑–∞—Ç–µ–º —Ä–∞–∑–≤–æ—Ä–æ—Ç –∏ –≤–æ–∑–≤—Ä–∞—Ç –≤ —Ç–æ—á–∫—É –ê");
        // –ó–¥–µ—Å—å –º–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –ª–æ–≥–∏–∫—É –¥–ª—è —Å–∏–º—É–ª—è—Ü–∏–∏ –º–∞—Ä—à—Ä—É—Ç–∞
    }

    // –î–æ–±–∞–≤–ª–µ–Ω–∏–µ —à—Ç—Ä–∞—Ñ–∞ –∑–∞ —Å–±–∏—Ç—ã–π –∫–æ–Ω—É—Å
    public void addPenalty() {
        penaltyCount++;
        logger.info("–î–æ–±–∞–≤–ª–µ–Ω —à—Ç—Ä–∞—Ñ. –¢–µ–∫—É—â–∏–π —Å—á–µ—Ç —à—Ç—Ä–∞—Ñ–æ–≤: {}", penaltyCount);
    }

    public int getPenaltyCount() {
        return penaltyCount;
    }
}
```

